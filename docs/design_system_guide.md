# DNA-utils-universal: Руководство по дизайн-системе

## Концепция дизайна

### Общий подход и философия

Дизайн-система DNA-utils-universal построена на принципах **научной точности**, **функциональности** и **доступности**. Как инструмент для работы с генетическими данными, интерфейс должен вызывать доверие, обеспечивать быстрый доступ к информации и позволять исследователям сосредоточиться на анализе данных, а не на борьбе с интерфейсом.

#### Ключевые принципы:

1. **Ясность и прозрачность** — каждый элемент имеет четкую функцию, интерфейс предсказуем и понятен
2. **Эффективность работы** — минимизация необходимых действий для выполнения задач
3. **Информационная иерархия** — важные данные выделяются, информация структурирована логично
4. **Адаптивность** — интерфейс адаптируется к различным устройствам и сценариям использования
5. **Единообразие** — консистентность стилей, отступов и взаимодействий в рамках всего приложения

### Визуальный язык

Визуальный язык DNA-utils-universal отражает баланс между современными тенденциями веб-дизайна и научной строгостью. Он характеризуется:

- **Чистотой и минимализмом** — отсутствие визуального шума, сосредоточение на содержании
- **Структурированностью** — четкая сетка, логическая группировка и иерархия элементов
- **Глубиной** — тонкое использование теней и эффектов для создания ощущения слоев интерфейса
- **Интерактивностью** — визуальная обратная связь при взаимодействии для улучшения пользовательского опыта

## Основные компоненты дизайн-системы

### 1. Цветовая схема

Цветовая схема DNA-utils-universal основана на палитре, сочетающей профессиональную строгость с современными акцентами:

#### Основные цвета:
```css
--primary: #3B82F6;      /* Основной цвет — яркий, надежный синий */
--primary-hover: #2563EB; /* Состояние при наведении — более насыщенный */
--secondary: #4B5563;    /* Вторичный цвет — нейтральный серый */
--accent: #8B5CF6;       /* Акцентный цвет — выразительный фиолетовый */
```

#### Фоновые цвета:
```css
--background-primary: #FFFFFF;   /* Основной фон — чистый белый */
--background-secondary: #F9FAFB; /* Вторичный фон — светло-серый */
--background-tertiary: #F3F4F6;  /* Третичный фон — более заметный серый */
--background-hover: #E5E7EB;     /* Фон при наведении */
--background-selected: #EFF6FF;  /* Фон для выбранных элементов */
```

#### Текстовые цвета:
```css
--text-primary: #2D3748;    /* Основной текст — темно-серый */
--text-secondary: #4A5568;  /* Вторичный текст — средне-серый */
--text-muted: #718096;      /* Приглушенный текст — светло-серый */
--text-inverse: #FFFFFF;    /* Текст на темном фоне — белый */
--text-link: #3182CE;       /* Ссылки — синий */
--text-link-hover: #2C5282; /* Ссылки при наведении — темно-синий */
```

#### Системные цвета:
```css
--success: #10B981;  /* Успех — зеленый */
--warning: #F59E0B;  /* Предупреждение — оранжевый */
--error: #EF4444;    /* Ошибка — красный */
--info: #3B82F6;     /* Информация — синий */
```

#### Специальные цвета:
```css
/* Цвета для отображения различий в маркерах */
--diff-1: #4299E1;  /* Небольшое различие */
--diff-2: #2B6CB0;  /* Среднее различие */
--diff-3: #2A4365;  /* Существенное различие */

/* Цвета для обозначения редкости маркеров */
--rarity-1: #2C5282;  /* Очень частый */
--rarity-2: #3182CE;  /* Частый */
--rarity-3: #4299E1;  /* Средний */
--rarity-4: #63B3ED;  /* Редкий */
--rarity-5: #90CDF4;  /* Очень редкий */
```

**Назначение цветов:**

- **Синий (Primary)** — используется для основных действий, кнопок и акцентов. Синий цвет выбран как символ надежности, точности и стабильности.
- **Серый (Secondary)** — используется для второстепенных элементов и фоновых различий.
- **Фиолетовый (Accent)** — используется для выделения важных элементов, альтернативных действий.
- **Системные цвета** — строго соответствуют своему функциональному назначению (успех, ошибка, предупреждение).
- **Специальные цвета** — используются только в специфических контекстах (различия маркеров, оценка редкости).

### 2. Типографика

Типографика DNA-utils-universal основана на гибкой системе с акцентом на читаемость и четкую иерархию:

```css
/* Основной текст */
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, 
             Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
font-size: 16px;
line-height: 1.5;
color: var(--text-primary);

/* Заголовки */
h1, h2, h3, h4, h5, h6 {
  font-weight: 600;
  line-height: 1.2;
  color: var(--text-primary);
}

h1 { font-size: 2rem; }    /* 32px */
h2 { font-size: 1.5rem; }  /* 24px */
h3 { font-size: 1.25rem; } /* 20px */
h4 { font-size: 1rem; }    /* 16px */
```

**Принципы использования:**

- **Системные шрифты** — используются для лучшей производительности и нативного ощущения на разных устройствах
- **Иерархия размеров** — последовательное уменьшение для обозначения важности
- **Ограниченное количество вариаций** — для поддержания единообразия и чистоты
- **Адаптивность** — размеры масштабируются на маленьких экранах для сохранения читаемости

### 3. Основные UI-компоненты

#### Card (Карточка)

Карточки — это базовый контейнерный компонент, используемый для группировки связанной информации:

```jsx
<Card className="shadow-lg">
  <CardHeader className="flex justify-between">
    <CardTitle>Заголовок карточки</CardTitle>
  </CardHeader>
  <CardContent>
    Содержимое карточки
  </CardContent>
</Card>
```

**Особенности:**
- Скругленные углы (`rounded-xl`) для современного вида
- Тонкая граница для визуального разделения
- Легкая тень для создания эффекта глубины
- Структурированные внутренние компоненты (заголовок, содержимое)
- Адаптивные отступы внутри компонента

**Применение:**
- Группировка настроек
- Отображение результатов поиска
- Информационные блоки
- Формы и элементы ввода

#### Collapsible (Сворачиваемая панель)

Сворачиваемые панели позволяют эффективно управлять пространством и фокусироваться на нужной информации:

```jsx
<Collapsible title="Заголовок панели" defaultOpen={true}>
  Содержимое, которое можно скрыть/показать
</Collapsible>
```

**Особенности:**
- Интуитивно понятные индикаторы состояния (стрелки)
- Плавная анимация открытия/закрытия
- Возможность настройки начального состояния
- Адаптивный дизайн для разных размеров экрана
- Визуальная обратная связь при взаимодействии

**Применение:**
- Группировка настроек в интерфейсе
- Организация больших форм
- Скрытие дополнительной информации
- Структурирование сложных интерфейсов

#### Form Controls (Элементы форм)

Элементы форм включают в себя входные поля, выпадающие списки, чекбоксы и прочие элементы взаимодействия:

```jsx
<input 
  className="p-2.5 border rounded-lg bg-background-primary focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all shadow-sm" 
  type="text" 
/>

<select 
  className="w-full p-2.5 border rounded-lg bg-background-primary focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all" 
/>

<Checkbox 
  checked={state} 
  onCheckedChange={setState} 
/>
```

**Особенности:**
- Явные состояния фокуса для улучшения доступности
- Согласованные размеры и отступы
- Плавные переходы между состояниями
- Тактильная обратная связь через визуальные эффекты
- Адаптивность к различным контекстам использования

**Применение:**
- Формы поиска и фильтрации
- Настройки параметров анализа
- Ввод данных пользователем
- Управление интерфейсом

#### Button (Кнопка)

Кнопки — ключевой элемент для инициирования действий:

```jsx
<button 
  className="px-4 py-2.5 bg-primary text-white rounded-lg hover:bg-primary/90 transition-all shadow-sm hover:shadow-md font-medium" 
  onClick={handleAction}
>
  Действие
</button>
```

**Варианты кнопок:**
- **Primary** — основные действия (синие)
- **Secondary** — второстепенные действия (серые)
- **Danger** — опасные действия (красные)
- **Ghost** — ненавязчивые действия (прозрачные)

**Особенности:**
- Четкая визуальная иерархия важности действий
- Эффекты при наведении и нажатии
- Состояния загрузки и отключения
- Согласованные размеры и отступы
- Возможность включения иконок

### 4. Специализированные компоненты

#### MatchesTable (Таблица совпадений)

Таблица совпадений — это сложный компонент для отображения результатов поиска совпадений STR-маркеров:

```jsx
<MatchesTable
  matches={filteredMatches}
  query={queryProfile}
  onKitNumberClick={handleKitSelection}
  onRemoveMatch={handleRemoveMatch}
  sortOrder="mutation_rate"
  calculationMode="standard"
/>
```

**Особенности:**
- Фиксированный заголовок для удобной навигации
- Цветовое кодирование различий маркеров
- Интерактивные ячейки с подробной информацией при наведении
- Встроенная фильтрация и сортировка
- Визуальные индикаторы уровня совпадения
- Адаптивный дизайн с горизонтальной прокруткой

#### STRMarkerGrid (Сетка маркеров)

Сетка маркеров — специализированный компонент для ввода и отображения значений STR-маркеров:

```jsx
<STRMarkerGrid
  initialMarkers={profile.markers}
  onMarkerChange={handleMarkerUpdate}
/>
```

**Особенности:**
- Группировка маркеров по логическим панелям
- Компактное представление большого количества данных
- Встроенная валидация значений
- Визуальное выделение заполненных значений
- Сворачиваемые секции для управления пространством

#### HaplogroupInfoPopup (Модальное окно информации о гаплогруппе)

Модальное окно для отображения детальной информации о гаплогруппах:

```jsx
<HaplogroupInfoPopup
  haplogroup="R1b-M269"
  onClose={handleClose}
/>
```

**Особенности:**
- Полупрозрачный фон с размытием
- Выразительная анимация появления
- Четкая структура контента
- Интерактивные ссылки на внешние ресурсы
- Адаптивность к различным размерам устройств

### 5. Принципы компоновки

#### Сетка и отступы

Вся система построена на согласованной системе отступов:

```css
/* Базовые множители отступов */
--spacing-1: 0.25rem;  /* 4px */
--spacing-2: 0.5rem;   /* 8px */
--spacing-3: 0.75rem;  /* 12px */
--spacing-4: 1rem;     /* 16px */
--spacing-5: 1.25rem;  /* 20px */
--spacing-6: 1.5rem;   /* 24px */
--spacing-8: 2rem;     /* 32px */
--spacing-10: 2.5rem;  /* 40px */
--spacing-12: 3rem;    /* 48px */
```

**Принципы использования отступов:**
- Внешние отступы компонентов (`margin`): 4, 5, 6, 8 (0.5-2rem)
- Внутренние отступы компонентов (`padding`): 4, 5, 6 (0.25-1.5rem)
- Между элементами интерфейса: 2, 3, 4 (0.5-1rem)
- Между группами компонентов: 8, 10, 12 (2-3rem)

#### Адаптивный дизайн

Система адаптируется к различным размерам устройств с помощью медиа-запросов:

```css
/* Мобильные устройства */
@media (max-width: 640px) {
  /* Уменьшенные отступы и размеры шрифтов */
}

/* Планшеты */
@media (min-width: 641px) and (max-width: 1024px) {
  /* Средние отступы и компоновка */
}

/* Десктопы */
@media (min-width: 1025px) {
  /* Полноразмерная компоновка */
}
```

**Подходы к адаптивности:**
- Mobile-first — базовые стили для мобильных устройств с расширением для больших экранов
- Гибкие контейнеры с `max-width` для крупных экранов
- Изменение компоновки с многоколоночной на одноколоночную для маленьких экранов
- Приоритизация контента на маленьких экранах

### 6. Анимации и переходы

Анимации используются сдержанно и целенаправленно, обогащая опыт взаимодействия без отвлечения:

```css
/* Базовые параметры переходов */
--transition-duration-fast: 150ms;
--transition-duration-normal: 300ms;
--transition-duration-slow: 500ms;
--transition-timing: cubic-bezier(0.4, 0, 0.2, 1);
```

**Типы анимаций:**
- **Микровзаимодействия** — небольшие отклики на действия пользователя (наведение, клик)
- **Переходы между состояниями** — плавное изменение видимости или свойств компонентов
- **Появление/исчезновение** — анимации для модальных окон, уведомлений
- **Загрузка** — индикаторы ожидания и прогресса

**Принципы анимации:**
- Естественность и плавность
- Краткость (не длиннее 500мс для большинства переходов)
- Информативность (подкрепляют действия пользователя)
- Согласованность (похожие действия — похожие анимации)
- Уважение к пользовательским настройкам (отключение для reduce-motion)

## Рекомендации по дальнейшему развитию

### Ближайшие улучшения

1. **Темная тема** — разработка полноценной темной темы с автоматическим переключением по системным настройкам
2. **Улучшение доступности** — аудит соответствия WCAG 2.1 AA и внесение необходимых исправлений
3. **Компоненты визуализации данных** — разработка специализированных графиков и диаграмм для генетических данных
4. **Документация компонентов** — создание библиотеки Storybook с интерактивными примерами

### Долгосрочные цели

1. **Дизайн-токены** — переход к систематизированным дизайн-токенам для упрощения управления стилями
2. **Кастомизация интерфейса** — возможность для пользователей настраивать интерфейс под свои потребности
3. **Интернационализация UI** — адаптация интерфейса для различных языков и культур
4. **Дополнительная персонализация** — адаптация интерфейса к потребностям различных исследовательских задач
5. **Автоматизация дизайн-системы** — внедрение инструментов для поддержания согласованности дизайна

## Заключение

Дизайн-система DNA-utils-universal разработана с глубоким пониманием потребностей научного сообщества, работающего с генетическими данными. Она сочетает в себе современные принципы веб-дизайна с функциональностью, необходимой для эффективной работы с complex data. 

Строгое следование этой системе при дальнейшей разработке обеспечит не только визуальную согласованность, но и последовательный, предсказуемый пользовательский опыт, что критически важно для научных инструментов, где точность и эффективность являются приоритетом.
